# Claudio API Server Configuration
# Copy this file to config.toml and adjust values as needed.

# =============================================================================
# Server Settings
# =============================================================================
[server]
host = "0.0.0.0"                        # Listen address
port = 17280                            # API server port
base_url = "http://localhost:17280"     # Public URL (used in user context links)

# =============================================================================
# Logging
# =============================================================================
[logging]
level = "info"                          # trace, debug, info, warn, error

# =============================================================================
# Rate Limiting
# =============================================================================
[rate_limit]
requests_per_second = 10                # Token bucket refill rate
burst_size = 50                         # Maximum burst capacity

# =============================================================================
# Storage
# =============================================================================
[storage]
path = "data/claudio.db"                # SQLite database path (relative to config dir)

# =============================================================================
# Dashboard
# =============================================================================
[dashboard]
port = 17281                            # Dashboard UI port (Next.js)

# =============================================================================
# Default Settings
# =============================================================================
[defaults]
# model = "sonnet"                      # Default model (optional, per-agent models take precedence)
timeout = 300                           # Default execution timeout in seconds
disallowed_tools = [                    # Tools blocked by default (can be overridden per-project)
    "Write",
    "Edit",
    "MultiEdit",
    "NotebookEdit"
]
isolated_dir = "/tmp/claudio-isolated"  # Working directory for isolated agents

# =============================================================================
# Plugins
# =============================================================================
[plugins]
enabled = ["slack", "semantic-search"]  # Active plugins: "slack", "semantic-search"

# -----------------------------------------------------------------------------
# Slack Plugin
# -----------------------------------------------------------------------------
# Requires environment variables:
#   - SLACK_APP_TOKEN (xapp-...)
#   - SLACK_BOT_TOKEN (xoxb-...)
[plugins.slack]
api_prefix = "/v1/slack"                # API route prefix
ui_path = "/integrations/slack"         # Dashboard UI path

[plugins.slack.webhooks]
mention = "http://localhost:5678/webhook/slack-mention"    # @mention events
message = "http://localhost:5678/webhook/slack-message"    # Direct messages
reaction = "http://localhost:5678/webhook/slack-reaction"  # Emoji reactions
feedback = "http://localhost:5678/webhook/slack-feedback"  # Feedback events

# -----------------------------------------------------------------------------
# Semantic Search Plugin
# -----------------------------------------------------------------------------
[plugins.semantic-search]
api_prefix = "/v1/documents"            # API route prefix
ui_path = "/playground/search"          # Dashboard UI path

# =============================================================================
# Classification Settings
# =============================================================================
# Note: fallback_agent, model, timeout are now per-project settings in the DB.
# Only integration settings remain in config.

[classify.integrations]
semantic_search = false                 # Enable semantic routing
semantic_min_score = 0.5                # Minimum similarity score (0.0-1.0)
semantic_top_k = 5                      # Number of examples to consider

# =============================================================================
# Projects and Agents
# =============================================================================
# Managed via Dashboard UI: http://localhost:17281/agents
#
# Project Settings (DB):
#   - name, working_dir
#   - system_prompt
#   - allowed_tools, disallowed_tools
#   - is_default
#   - fallback_agent, classify_model, classify_timeout
#   - rate_limit_rpm
#
# Agent Settings (DB):
#   - name, description
#   - model, priority, timeout
#   - keywords (supports /regex/ patterns)
#   - examples (for semantic routing)
#   - instruction, tools
#   - static_response
#   - isolated (use isolated_dir instead of project working_dir)
